# fastapi project
Онлайн платформа для бронирования ресторанов с использованием Fast Api

Модели: Пользователи, Рестораны, Бронирования

Идея проекта: Разработка онлайн платформы для бронирования столиков в ресторанах с возможностью просмотра меню, выбора даты и времени и оформления бронирования.

Требования к проекту:
- Упаковка проекта в докер-компоуз и запуск через docker compose up без дополнительной настройки
- прохождение flake8 + mypy в соответствии с конфигурациями проекта
- Кеширование всего, что возможно закешировать через redis
- Orm:  sqlalchemy2.0
- Migration: alembic (необязательно т.к. не делали на парах)
- Тесты - pytest + mock на redis и rollback транзакций фикстур вместо удаления.
- Минимальные данные при разворачивании проекта (фикстуры)
- Метрики: 
  - На кол-во полученных запросов в разрезе каждой ручки.
  - На кол-во ошибок по каждой ручке
  - На кол-во отправленных запросов
  - Время выполнения каждой ручки в среднем (гистограмма)
  - Время выполнения всех интеграционных методов (запросы в бд, редис и тп (гистограмма))
- Валидация входящих данных (pydantic)
- Настройки в env
- Без дублирования кода
- poetry как сборщик пакетов
- Обработка ошибок и соответствующие статусы ответов
- В README.md ожидается увидеть как что работает, чтобы можно было ознакомиться проще с проектом
___
**Логика проекта**

* Пользователи могут зарегистрироваться на платформе, предоставив свои данные: имя, телефон и пароль.
* После успешной регистрации пользователи могут аутентифицироваться, используя свои учетные данные. Также доступен функционал обновления данных для пользователя.
* Пользователи могут просматривать список ресторанов, доступных для бронирования.
* По каждому ресторану можно посмотреть подробную информацию, включая адрес, описание и меню.
* Пользователи могут просматривать меню с блюдами, ценами и категориями.
* Пользователи могут выбрать ресторан, дату и время для бронирования столика.
* Пользователи могут просматривать свои текущие и предыдущие бронирования.
* Администраторы и сотрудники могут управлять ресторанами, меню, а также просматривать и управлять бронированиями.
* Администраторы могут добавлять новые рестораны и обновлять информацию о существующих.
___
До того как запустить проект создайте:
1. Файл `.env` в папке `/grafana`. Пример находится в файле '/grafana/env.example'
2. Файл `.env` в папке `/conf`. Пример находится в файле '/conf/env.example'

Или просто переименуйте файл с примером `env.example -> env`
___
Для запуска проекта используйте команду
```
sudo docker-compose up
```
___
Для наполнения БД тестовыми данными воспользуйтесь командой
```
sudo docker exec -it web /code/scripts/web/test_db.sh
```
___
Для запуска тестов воспользуйтесь командой в отдельном терминале
```
sudo docker exec -it web pytest tests
```


___
**Если все сделано успешно, вы можете перейти по ссылкам:**

+ Документация http://0.0.0.0:8000/swagger
+ Метрика http://0.0.0.0:8000/metrics
+ Prometheus http://0.0.0.0:9090
+ Grafana http://0.0.0.0:3000/login

___
 **Чек-лист**

- [X] Модели SQLAlchemy
- [X] Фикстуры
- [X] Миграции
- [X] Схемы Pydantic
- [X] CRUD
- [X] Эндпоинты
- [X] Обработка исключений
- [X] Метрики
- [X] Кэширование данных
- [X] Тесты